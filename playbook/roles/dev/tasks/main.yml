---
- name: setup development environment
  tags: ['dev']
  block:

    - import_tasks: ansible.yml
    - import_tasks: k8s.yml
    - import_tasks: docker.yml

    - name: install other dev pkgs
      import_role: name=pkgs tasks_from=util__install_packages
      vars:
        packages:
          - bind-tools
          - dbeaver
          - doctl-bin
          - gdb
          - mitmproxy
          - mssql-tools
          - nmap
          - rtags
          - sops
          - terraform
          - tcpdump
          - traceroute
          - wireshark-qt
          - whois
          - lftp
          - k9s-bin

    - name: stow digitalocean priv dotfiles
      become_user: "{{ user.name }}"
      stow: package="digitalocean" source_dir="{{ priv_dir }}"

    - name: stow giantswarm priv dotfiles
      become_user: "{{ user.name }}"
      stow: package="giantswarm" source_dir="{{ priv_dir }}"

    - name: install jwt-cli
      unarchive:
        src: https://github.com/mike-engel/jwt-cli/releases/download/2.5.0/jwt-cli-2.5.0-linux.tar.gz
        dest: "$HOME/.local/bin"
        remote_src: yes
